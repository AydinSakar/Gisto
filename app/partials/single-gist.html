<header>

    <img src="{{single.user.avatar_url}}" class="gravatar" title="{{single.user.login}}" />
    <a onclick="document.location.href = '#/create'" title="Create new Gist"><i class="create icon-file"></i></a>
    <a href="login.html" title="Switch account"><i class="update icon-signout"></i></a>
    <a href="" title="General settings"><i class="settings icon-cog"></i></a>

    <span class="type {{single.public | publicOrPrivet}}">{{single.public | publicOrPrivet}}</span>


    <span ng-switch on="edit">
        <span ng-switch-when="true">
            <input class="edaitable" ng-model="single.description">
        </span>
        <span class="title" ng-switch-default>
            {{(single.description | removeTags | truncate:55) || 'Untitled'}}
        </span>
    </span>



</header>

<div class="messenger">
    <i class="icon-lightbulb"></i>
    <span>Simple notification</span>
</div>

<div class="messenger info">
    <i class="icon-info-sign"> </i>
    <span>Informative notification</span>
</div>

<div class="messenger warn">
    <i class="icon-warning-sign"> </i>
    <span>Warning</span>
</div>

<div class="messenger ok">
    <i class="icon-ok-sign"> </i>
    <span>OK / Success notification</span>
</div>

<div class="messenger loading">
    <i class="icon-spinner icon-spin"> </i>
    <span>Loading...</span>
</div>

<div class="messenger edit">
    <i class="icon-edit"> </i>
    <span>Edit mode <b>on</b> | <a href="" ng-click="disableEdit()">Cancel</a></span>
</div>

<div class="toolbox">

    <span>
        <b>Revisions:</b> <i>{{single.history.length}}</i> | <b>Created:</b> <i>{{ single.created_at| date:'dd/MM/yyyy HH:mm:ss' }}</i> | <b>Last Updated:</b> <i>{{ single.history[0].committed_at | date:'dd/MM/yyyy HH:mm:ss' }}</i>
    </span>

    <a ng-click="addFile()">Add new file</a>
    <a href="" ng-click="enableEdit()">Edit</a>
    <a ng-click="save()">Save</a>
    <a href="">Download</a>
    <a href="">Remove</a>

</div>

<section ui-keydown="{'ctrl-83':'save($event)'}" ui-event="{ dragover : 'dragStart($event)', dragend: 'dragEnd($event)', drop: 'drop($event)' }">

    <div class="the-gist" ng-repeat="file in single.files" onload="initEditors()">
        <div class="the-gist-name">


            <span ng-switch on="edit">
                <span ng-switch-when="true">
                    <input class="edaitable" ng-model="file.filename">
                </span>
                <span ng-switch-default>
                    <i class="icon-file-alt"></i> {{file.filename}}
                </span>
            </span>


            <a href="#" title="Edit"><i class="icon-pencil"></i></a>
            <a href="#" title="Edit"><i class="icon-tags"></i></a>
            <a href="#" title="Star"><i class="icon-star-empty"></i></a>
            <a href="#" title="Download"><i class="icon-download"></i></a>
            <a href="{{single.html_url}}" target="_blank" title="Direct link"><i class="icon-link"></i></a>
            <a href="#" title="Copy to clip-board"><i class="icon-paper-clip"></i></a>
        </div>

        <editor language="{{file.language | codeLanguage}}" index="{{$index}}"></editor>

    </div>

</section>

</span>

<div class="comments">
    <b><span class="icon-comments"></span> {{single.comments}}</b> Comment(s) <i class="icon-arrow-up"> Show</i>

    <div ng-controller="commentsGistCtrl" class="the-comments">
        <span ng-repeat="comment in comments">
            <p>
                <img src="{{comment.user.avatar_url}}" class="comment_gravatar" title="{{comment.user.login}}" />
                <b>{{comment.user.login}}</b> <b class="icon-time"></b> {{comment.created_at | date}}</p>
            <blockquote>{{comment.body}}</blockquote>
        </span>
    </div>

</div>

<footer>
    &copy; 2013 <b>Gisto</b> | http://gisto.github.com
</footer>
